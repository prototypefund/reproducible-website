---
layout: report
year: "2019"
month: "12"
title: "Reproducible builds in December 2019"
draft: true
---

## Software development

#### Upstream patches

* Arnout Engelen:
    * [`sbt`](https://github.com/sbt/sbt/pull/5344) (timestamps and file order in generated archives)
    * [NixOS](https://github.com/NixOS/nixpkgs/pulls?q=is%3Apr+label%3A%226.topic%3A+reproducible+builds%22+is%3Aclosed) [`installer/iso-image`](https://github.com/NixOS/nixpkgs/pull/75484) (timestamps in ISO installer image)

* Bernhard M. Wiedemann:
    * multiple patches to [the grass Geographic Information System](https://github.com/OSGeo/grass):
        * [sort readdir + dict](https://github.com/OSGeo/grass/pull/247)
        * [use `SOURCE_DATE_EPOCH` to seed the pseudo-random generator](https://github.com/OSGeo/grass/pull/251)
        * [do not install config.status](https://github.com/OSGeo/grass/pull/263) because it contained the build host name
    * [various OpenStack python packages](https://review.opendev.org/700810) (Dont package .pickl file)
    * [`python-psychtoolbox`](https://github.com/Psychtoolbox-3/Psychtoolbox-3/pull/614) (sort python readdir)
    * [`python-autobahn`](https://github.com/crossbario/autobahn-python/issues/1275) (report stuck tests on 1-core-VM)
    * [`bowtie`](https://github.com/BenLangmead/bowtie/pull/99) (date)
    * [`kismet`]( https://github.com/kismetwireless/kismet/pull/195) (date)
    * [`coq`](https://github.com/coq/coq/pull/11227) (ocaml date)
    * [`coq`](https://github.com/coq/coq/issues/11229) (report that .vo files vary from build order)
    * [`php7-pear`](https://github.com/pear/pear-core/pull/105) (sort php readdir)
    * [`orthanc`](https://bitbucket.org/sjodogne/orthanc/pull-requests/12/sort-file-lists/diff) (sort python readdir, toolchain)
    * [`vpp`](https://gerrit.fd.io/r/c/vpp/+/23819) (shell date, regression fix)
    * [`pw3270`](https://github.com/PerryWerneck/pw3270/pull/2) (make date + convert -strip)
    * [`pmix`](https://github.com/openpmix/openpmix/pull/1560) (date+time+host+user)
    * [`charybdis`](https://github.com/charybdis-ircd/charybdis/pull/297) (shell date+time)
    * [`lifelines`](https://github.com/lifelines/lifelines/pull/389) (date)
    * [`ripgrep`](https://github.com/BurntSushi/ripgrep/issues/1441) (report variations from CPU)
    * [`libcec`](https://github.com/Pulse-Eight/libcec/pull/487) (cmake: use TIMESTAMP instead of date)
    * [`rubygem-ronn`](https://github.com/kamontat/ronn/pull/3) (updated date patch)
    * [`perl`](https://github.com/Perl/perl5/pull/17390) (fix doc-based FTBFS-2020)
    * [`python-python-crfsuite`](https://github.com/scrapinghub/python-crfsuite/pull/115) (sort python glob / readdir)

* Chris Lamb:
    * [gtk-doc](https://gitlab.gnome.org/GNOME/gtk-doc/merge_requests/37) (toolchain, sort python set random order)

* Jelle van der Waa:
    * [`tbb`](https://github.com/intel/tbb/issues/202) (hostname, date+time)
    * [`pcp`](https://github.com/performancecopilot/pcp/pull/805) (date+time)
    * [`libcec`](https://github.com/Pulse-Eight/libcec/issues/485) (date+time)
    * [`cgdb`](https://github.com/cgdb/cgdb/pull/215) (date+time)
    * [`cloc`](https://github.com/AlDanial/cloc/pull/438) (date+time)
    * [`dlang`](https://issues.dlang.org/show_bug.cgi?id=20444) (please support `SOURCE_DATE_EPOCH` in the D lang compiler)
    * [`dlang`](https://issues.dlang.org/show_bug.cgi?id=20445) (date+time in dtools)

#### openSUSE

* Bernhard published his [monthly Reproducible Builds status update](https://lists.opensuse.org/opensuse-factory/2019-12/msg00174.html)

* patches:
    * [`hidviz`](https://build.opensuse.org/request/show/754485) (use convert -strip)
    * [`rpmlint-mini`](https://build.opensuse.org/request/show/754705) (sort python compile file list)
    * [`rubygem-ronn`](https://build.opensuse.org/request/show/757287) (toolchain, ruby date ; [also submitted upstream](https://github.com/kamontat/ronn/pull/3) with updated patch)
    * [`python-jupyterlab`](https://build.opensuse.org/request/show/755664) (make pip install reproducible)
    * [`python-jupyterlab-templates`](https://build.opensuse.org/request/show/757375) (make pip install reproducible)
    * [`python-ipydatawidgets`](https://build.opensuse.org/request/show/760182) (make pip install reproducible ; avoid trouble with zip order+mtime)
    * [`python-mox3`](https://build.opensuse.org/request/show/760190) (drop sphinx environment.pickl)
    * [`syslinux6`](https://build.opensuse.org/request/show/759820) (sort find / readdir ; already upstream)

* bugs:
    * [`python-swifter`](https://bugzilla.opensuse.org/show_bug.cgi?id=1158578) (report failure to build on 1-core VM)
    * [`libmicro`](https://bugzilla.opensuse.org/show_bug.cgi?id=1159556) (report LTO causing unreproducible .o files ; [fix by Martin Pluskal](https://build.opensuse.org/request/show/758238))
    * [`libhugetlbfs`](https://bugzilla.opensuse.org/show_bug.cgi?id=1159558) (report unreproducible .ldscript file)
    * [`tesseract-ocr`](https://bugzilla.opensuse.org/show_bug.cgi?id=1159231) (report variations from build machine CPU)

#### Arch Linux

During the summit the database structure on tests.reproducible-builds.org was
changed and the testing jobs updated. Work has been started on a verification
test job which rebuilds officially released packages and verifies if they are
reproducible. In the hacking time after the summit several packages where made
reproducible which raised the amount of reproducible packages by 1.5%. For example [libxslt](https://www.archlinux.org/packages/extra/x86_64/libxslt/) was patched with the patch already used openSUSE and Debian.

#### Debian

* [946315](https://bugs.debian.org/946315) [forwarded upstream](https://github.com/EddyRivasLab/infernal/pull/19)

* [946333](https://bugs.debian.org/946333) [forwarded upstream](https://github.com/chartjs/Chart.js/pull/6817)

* [946331](https://bugs.debian.org/946331) [forwarded upstream](https://gitlab.gnome.org/GNOME/gtk-doc/merge_requests/37)

* [#946330 applied upstream](https://bugs.debian.org/946330) - FIXME link to upstream

#### GNU Guix

* Vagrant Cascadian updated [diffoscope to 133](https://git.savannah.gnu.org/cgit/guix.git/commit/?id=6a65185ee46babca0630db1d64eaa8c1447d1cd6) in GNU Guix.

## rb5 summit

* kpcyrd made https://tests.reproducible-builds.org/alpine/main/py3-uritemplate/py3-uritemplate-3.0.0-r4.apk.html the first reproducible alpine package in our CI ;   https://tests.reproducible-builds.org/alpine/alpine.html shows 94% reproducible in main repo
* mattia, jelle and apacar discussed some database changes for the tests.r.o database to allow submitting results of attempts to verify officially distributed packages from for example Arch Linux.
* mattia did some maintenance work on the reproducible builds database to convert timestamps from strings to real timestamps data types
* mattia renamed the Arch Linux suites from `archlinux_$suite` to `$suite`.

* Maven:
  * Herv√© Boutemy wrote in Message-ID: <3067075.YCjHTnBDQv@giga> on rb-general:
  "I just launched a vote for Maven Release Plugin 3.0.0-M1 with instructions on how to check that this build is as reproducible as I expect it to be. Don't hesitate to check and vote on the release: https://lists.apache.org/thread.html/db3dea44d827d0a5cc557407d4cfe69b4304475f6e41030517aea29e%40%3Cdev.maven.apache.org%3E - Thanks for your help to make in the future Reproducible Builds a normal feature for any Java project published to Maven Central."
  * Hans-Christoph Steiner added in Message-ID: <6ce61db3-af20-df3a-fe93-bebee7b04e7f@guardianproject.info>
  "After working with Maven and Bazel devs at the summit,  I wanted to follow up to keep the buildinfo work moving.  I have buildinfo generation working with gradle, and it is now working in Maven plugins. I'd heard it was working with Bazel, but I haven't seen it yet.
  The JARs produced with Maven and Gradle now only differ in the sort order of files in the ZIP header.  `mvn deploy` even pushes the buildinfo file to the maven repo: https://gitlab.com/eighthave/jtorctl/-/packages/59404
  In this process, I found a small bug in maven archiver, which puts the META-INF/ dir entry after the META-INF/MANIFEST.MF entry in the ZIP: https://issues.apache.org/jira/browse/MSHARED-849"
  * Later he added in Message-ID: <7c8245e1-8b57-368e-a09a-00f1de0c3fce@guardianproject.info>
  "More progress!  The jtorctl library that we hacked on in Marrakesh is now published using Maven with a .buildinfo file: https://repo1.maven.org/maven2/info/guardianproject/jtorctl/0.4/"

* summit reports / tweets / blogposts / commits
    * https://twitter.com/JANieuwenhuizen/status/1017497499089633280
    * https://twitter.com/h4nnes/status/1204347645206126592
    * https://guix.gnu.org/blog/2019/reproducible-builds-summit-5th-edition/



#### unsorted






* [FIXME](https://cloud.google.com/security/binary-authorization-for-borg/) a whitepaper on how Google reduces exposure of user-data to unauthorized code - by the team of summit attendee Colleen.

* [FIXME](https://media.ccc.de/v/36c3-11172-leaving_legacy_behind#t=2321) the talk titled "Leaving legacy behind" about MirageOS by Hannes Mehnert had a section on reproducible builds.

* [857454 reopened](857454)

* https://www.cncf.io/announcement/2019/12/18/cloud-native-computing-foundation-announces-tuf-graduation/

* https://www.bunniestudios.com/blog/?p=5706
