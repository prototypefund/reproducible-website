---
layout: report
year: "2019"
month: "11"
month_name: "November"
title: "Reproducible builds in November 2019"
draft: true
---

**Welcome to the November 2019 report from the [Reproducible Builds]({{ "/" | prepend: site.baseurl }}) project. ðŸ‘Œ**
{: .lead}

[![]({{ "/images/reports/2019-11/reproducible-builds.png#right" | prepend: site.baseurl }})]({{ "/" | prepend: site.baseurl }})

In our monthly reports we attempt outline the most important things that we have been up to recently. As a reminder on what our little project is all about, whilst anyone can inspect the source code of free software for malicious changes most software is distributed to end users or servers as precompiled binaries. Reproducible builds tries to ensure that no changes have been made during these compilation processes by promising identical results are always generated from a given source, allowing multiple third-parties to come to a consensus on whether a build was compromised.

In this month's report, we will cover:
* FIXME

## Software development

#### Upstream patches

The Reproducible Builds project detects, dissects and attempts to fix as many currently-unreproducible packages as possible. We endeavour to send all of our patches upstream where appropriate. This month, we wrote a large number of such patches, including:

* Arnout Engelen:
    * [`OpenSC`](https://github.com/OpenSC/OpenSC/pull/1839) (generate consistent docbook id's)

* Bernhard M. Wiedemann:
    * [`python-oslo.reports`](https://review.opendev.org/693327) (drop unneccesary files with randomness)
    * [`perl-HTTP-Cookies`](https://github.com/libwww-perl/HTTP-Cookies/pull/56) (fix FTBFS-2025)
    * [`sql-parser`](https://github.com/hyrise/sql-parser/pull/133) (sort find/readdir)
    * [`maven-plugin-bundle`](https://github.com/apache/felix/pull/209) (java date)
    * [`vim`](https://bugzilla.opensuse.org/show_bug.cgi?id=1157623) (report FTBFS-j1)
    * [`pocl`](https://github.com/pocl/pocl/issues/793) (report compile-time CPU-detection)
    * [`lib3270`](https://github.com/PerryWerneck/lib3270/pull/3) (merged, date)
    * [`afl`](https://github.com/vanhauser-thc/AFLplusplus/pull/122) (date)
    * [`buzztrax`](https://github.com/Buzztrax/buzztrax/issues/89) (report parallelism-nondeterminism issue from gtk-doc)
    * Various updates to rpm:
        * [`1`](https://github.com/rpm-software-management/rpm/pull/931) (keep at least one changelog entry to set `SOURCE_DATE_EPOCH`)
        * [`2`](https://github.com/rpm-software-management/rpm/pull/933) (regression fix that rpm-4.15 can override Build Date header again)
        * [`3`](https://github.com/rpm-software-management/rpm/pull/936) (sort to avoid ordering issues from parallel header generation)
        * [`4`](https://github.com/rpm-software-management/rpm/pull/944) (a cleaner solution for #3 above)

* Chris Lamb:
    * [`genpy`](https://github.com/ros/genpy/pull/110) (sort python set)
    * [`isbg`](https://github.com/isbg/isbg/pull/139) (user)
    * [`snakemake`](https://github.com/snakemake/snakemake/pull/80) (build path)
    * [`splitpatch`](https://github.com/jaalto/splitpatch/pull/8) (fixup makefile date)
    * [`sybil`](https://github.com/cjw296/sybil/pull/18) (python date)

* Gabriel Scherer:
    * [`ocaml`](https://github.com/ocaml/ocaml/pull/1515) (honor `BUILD_PATH_PREFIX_MAP`)

* Vagrant Cascadian:
    * [`resource-agents`](https://github.com/ClusterLabs/resource-agents/pull/1428) (dash vs bash)

#### Debian

* Rene Engelhard uploaded libreoffice (1:6.4.0~alpha1-0reprotest1) to experimental, with these changes relevant to r-b:
       * debian/rules, debian/tests/control:
         - temporarily disable all languages except en-US,de,he,ja, disable -g
           (and -dbgsym), don't run make check/build the test packages so that we
           hopefully don't timeout in the reproducible builds infrastructure

* Thorsten Glaser filed "#944691: dh: set umask 022 for all operations"

* Vagrant Cascadian uploaded [GNU Mes](https://www.gnu.org/software/mes/) to [Debian](https://tracker.debian.org/news/1080851/accepted-mes-020-1-source-amd64-into-experimental-experimental/).

* [bug #944520](https://bugs.debian.org/944520) for isbg [forwarded](https://github.com/isbg/isbg/pull/139)
* [bug #944707](https://bugs.debian.org/944707) for lintian
* [bug #944782](https://bugs.debian.org/944782) for sybil [forwarded](https://github.com/cjw296/sybil/pull/18)
* [bug #932116](https://bugs.debian.org/932116) and [#943956](https://bugs.debian.org/943956) for snakemake [forwarded](https://github.com/snakemake/snakemake/pull/80)
* [bug #943694](https://bugs.debian.org/943694) for genpy [forwarded](https://github.com/ros/genpy/pull/110#event-2768597322)
* [bug #944131](https://bugs.debian.org/944131) for splitpatch [forwarded](https://github.com/jaalto/splitpatch/pull/8)

#### Alpine Linux

* FIXME: first reproducible Alpine package: https://mobile.twitter.com/n_copa/status/1192447768855482369

#### Fdroid:

* Holger increased / on osuosl168, our Fdroid build node, by 100G, to cope with the reproducible_fdroid_build_apps job finally succeeding building apps again.

#### Arch Linux

* The slight [green bump](https://tests.reproducible-builds.org/archlinux/archlinux.png) is due to a bug in the CI test framework where one build was building with --nocheck while the other did run and install the test dependencies leading to differences in the BUILDINFO file.
* A lot of work has been put into getting [core] more reproducible, every package has been [rebuild](https://lists.archlinux.org/pipermail/arch-dev-public/2019-November/029721.html) with a new pacman which resolves an issue in storing the package size. Build failures and download issues have been resolved which lead to an increase of reproducible packages in the CI setup.
*  Morten Linderud (Foxboron) wrote a [blogpost](https://linderud.dev/blog/reproducible-arch-linux-packages/) on reproducible builds progress for Arch packages, how to reproduce packages and the future of reproducible builds progress.
* The standard Arch development tools package devtools contains a new 'makerepropkg' tool which can reproduce a repository package given a PKGBUILD exists in the current working directory.

#### openSUSE

* Bernhard M. Wiedemann posted a [2019 summary of openSUSE updates](https://lists.reproducible-builds.org/pipermail/rb-general/2019-November/001722.html), including rpm, [high level openSUSE status](https://bugzilla.opensuse.org/show_bug.cgi?id=1133809), [fixing problems with .pyc files](https://bugzilla.opensuse.org/show_bug.cgi?id=1094323) which is also relevant to Arch Linux and [a nice graph](http://rb.zq1.de/compare.factory/graph.png).

# include image: http://rb.zq1.de/compare.factory/graph.png

* Posted [his monthly Reproducible Builds status update](https://lists.opensuse.org/opensuse-factory/2019-11/msg00370.html) for the [openSUSE](https://opensuse.org/) distribution.

* Submitted patches to
    * [`brp-check-suse`](https://github.com/openSUSE/brp-check-suse/pull/29) (to strip LTO data from .o files)
    * [`pcc`](https://build.opensuse.org/request/show/745529) (fix FTBFS from LTO .a files)
    * [`nulloy`](https://build.opensuse.org/request/show/746033) (zip, [already upstream](https://github.com/nulloy/nulloy/pull/149))
    * [`cardpeek`](https://build.opensuse.org/request/show/746648) (fixup a previous patch)
    * [`cecilia`](https://build.opensuse.org/request/show/750463) (strip date+time in png)
    * [`abseil-cpp`](https://build.opensuse.org/request/show/750468) (sort find/readdir)
    * [`opencensus-cpp`](https://build.opensuse.org/request/show/751817) (sort find/readdir)

#### Unsorted

* [FIXME](https://twitter.com/acreature/status/1191426228852600837) The Manifest podcast talked with Chris Lamb about the Reproducible Builds project and Debian package management. [direct link](https://manifest.fm/14)

* FIXME: [Jeremiah Orians announced the release of mescc-tools-seed v1.1](https://lists.reproducible-builds.org/pipermail/rb-general/2019-November/001711.html)
	https://github.com/oriansj/mescc-tools-seed
	Capable of bootstrapping from a simple hex assembler all the way to a cross-platform C compiler (M2-Planet) and a simplified version of Gnu MES (mes-m2). Work is still on going to finish a FULL version of Gnu MES, which will result in a full bootstrap from a 357byte bootstrap binary all the way to GCC. With 2 separate bootstraps already completed (x86 and AMD64) with more on the way (ARMv7l+aarch64)

* FIXME: [HervÃ© Boutemy <hboutemy@apache.org> announced the release of 3 base Maven plugins (source, jar and assembly) to get Reproducible Builds as direct Maven build output: see "Configuring for Reproducible Builds" documentation [1] for more details to try on your own projects built with Maven.](https://lists.reproducible-builds.org/pipermail/rb-general/2019-November/001708.html)



* Jan Nieuwenhuizen [announced the release of GNU Mes 0.21](https://lists.reproducible-builds.org/pipermail/rb-general/2019-November/001725.html).

* Vagrant Cascadian presented [*There and Back Again, Reproducibly*](https://osem.seagl.org/conferences/seagl2019/program/proposals/671) at [SeaGL](https://seagl.org) in Seattle, Washington November 16th 2019.

* Mike Hommey did https://hg.mozilla.org/integration/autoland/rev/cd6b79c74b23 to fix "[Bug 1597903](https://bugzilla.mozilla.org/show_bug.cgi?id=1597903) - Add an error message when differences are found in diffoscope."

* FIXME: science challenge mentions reproducible builds: Ten Years Reproducibility Challenge: https://rescience.github.io/ten-years/

* [FIXME](https://github.com/ocaml/ocaml/pull/1515#issuecomment-559035723) After two years and plenty discussion, the ocaml compiler project merged a change to support the `BUILD_PATH_PREFIX_MAP` environment variable.

* [FIXME](https://www.meetup.com/NixOS-London/events/266848767) On 2019-12-09, the Nix project is hosting an event in London titled "Nix Papercuts Christmas Hackathon" to improve this project (that also aims for reproducibility)

* Eli Schwartz reported a bug to GNU groff for incomplete SOURCE_DATE_EPOCH support due to output files [embedding the timezone](https://savannah.gnu.org/bugs/?57218).
