---
layout: new/report
year: "2019"
month: "06"
title: "Reproducible Builds in June 2019"
draft: true
---

## Mini DebConf Hamburg Sprint

kpcyrd, lynxis, Holger Levsen and Jelle van der Waa attended [mini DebConf Hamburg](https://wiki.debian.org/DebianEvents/de/2019/MiniDebConfHamburg) and worked on reproducible builds.

* Jelle van der Waa
    * Improved the [reproducible_json.py script](https://salsa.debian.org/qa/jenkins.debian.net/commit/20a7b86ce0a26bd8f8718478c8e8a1612c0af87e) to generate distro specific JSON which lead to the availability of an [Arch Linux JSON](https://tests.reproducible-builds.org/archlinux/reproducible.json) file.
    * Investigated why the Arch Linux kernel package is not reproducible and found out that ```KBUILD_BUILD_HOST```, ```KGBUILD_BUILD_TIMESTAMP``` should be set. The enabling of ```CONFIG_MODULE_SIG_ALL``` causes the kernel modules to be signed with an at build time created key if non is provided which leads to unreproducibility.
    * [keyutils](https://www.archlinux.org/packages/core/x86_64/keyutils/) was fixed for embedding the build date in it's binary with this [patch](https://pkgbuild.com/~jelle/0001-Make-keyutils-reproducible.patch)
    * [nspr](https://www.archlinux.org/packages/core/x86_64/nspr/) has been made reproducible in Arch Linux with the follow  ing [change](https://git.archlinux.org/svntogit/packages.git/commit/trunk?h=packages/nspr&id=3696d15bba92ea14931f842b27654e318055e532)

* kpcyrd
    * Created a Jenkins [job](https://jenkins.debian.net/view/All/job/reproducible_setup_schroot_alpine_jenkins/) to generate an Alpine build chroot
    * Created a Jenkins [job](https://jenkins.debian.net/view/All/job/reproducible_alpine_scheduler/) to schedule new Alpine packages
    * Created a Jenkins [job](https://jenkins.debian.net/job/reproducible_builder_alpine_1/) for building Alpine packages
    * Created an Alpine reproducible testing [overview page](https://tests.reproducible-builds.org/alpine/alpine.html)
    * Provided a proof of concept [patch](https://gitlab.com/kpcyrd/abuild/commit/ea1c11811eaf0a98b5b8ab9c57574a9895d56454.patch) to make abuild respect SOURCE_DATE_EPOCH when creating Alpine packages files.

* lynxis:
 * rewrote db interaction for OpenWrt.
 * use python3 for openwrt package parser.
 * managed to setup a test environment, using the new README.development.

* Holger reviewed and merged all the above commits and supported Jelle, kpcyrd and lynxis to understand the codebase.
 * Holger split out README.development from the regular README.
* Holger and Jelle also gave a talk titled 'Reproducible Builds - aiming for Bullseye' (bullseye is the next Debian release name). 
 * Video: https://meetings-archive.debian.net/pub/debian-meetings/2019/miniconf-hamburg/reproducible-builds.webm
 * Slides: TBD

Jelle was also so very kind and gifted Holger with this very nice display: https://github.com/jelly/reproduciblebuilds-display (FIXME: include picture of it)
